import{r as l,j as t}from"./vendor.CrIUclV0.js";import{S as G}from"./chunk_searchablelibrary.CpyzYAdE.js";import{o as N,I as k}from"./InsightsGrid.CoEh1an1.js";const L="/sdgs/default.svg",E=G.reduce((s,n)=>{const d=`SDG ${String(n.id).padStart(2,"0")}`;return s[d.toUpperCase()]=n,s},{});N.reduce((s,n)=>(s[n.slug]=n,s),{});const I=[{name:"All",slug:"/blog"},{name:"Blog",slug:"/blog"},{name:"News",slug:"/news"},{name:"Resources",slug:"/resources"}];function T({posts:s=[]}){const[n,d]=l.useState(""),[i,p]=l.useState("All"),[c,g]=l.useState("All"),h=l.useMemo(()=>{const e=new Set;return s.forEach(a=>{const o=(a.data??a).SDGs??[];Array.isArray(o)&&o.forEach(r=>e.add(`SDG ${String(r).padStart(2,"0")}`))}),["All",...Array.from(e).sort()]},[s]),f=l.useMemo(()=>{const e=n.toLowerCase(),a=i.toLowerCase(),u=new Date;return s.filter(o=>{const r=o.data??o,b=(r.title??"").toLowerCase(),w=(r.excerpt??r.description??"").toLowerCase(),S=r.tags??[],y=(o.collection??"blog").toLowerCase(),A=Array.isArray(r.SDGs)?r.SDGs.map(m=>`SDG ${String(m).padStart(2,"0")}`):[],C=c==="All"||A.includes(c),v=i==="All"||y===a,j=b.includes(e)||w.includes(e)||S.some(m=>m.toLowerCase().includes(e)),x=r.pubdate?new Date(r.pubdate):null,D=x?x<=u:!0;return C&&v&&j&&D})},[n,i,c,s]);return t.jsxs("div",{className:"space-y-6 w-full px-4 sm:px-6 lg:px-8",children:[t.jsxs("nav",{className:"flex flex-wrap gap-2 border-b pb-3 border-accent-500 dark:border-accent-500",children:[t.jsx("button",{onClick:()=>g("All"),className:`px-4 py-2 text-sm font-medium rounded-t-md transition ${c==="All"?"bg-accent-600 text-white shadow":"text-gray-700 dark:text-gray-200 hover:bg-accent-100 dark:hover:bg-accent-700"}`,children:"All SDGs"}),h.filter(e=>e!=="All").map(e=>{const a=E[e.toUpperCase()];return t.jsxs("button",{onClick:()=>g(e),className:`flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-t-md transition ${c===e?"bg-accent-600 text-white shadow":"text-gray-700 dark:text-gray-200 hover:bg-accent-100 dark:hover:bg-accent-700"}`,children:[t.jsx("img",{src:a?.icon||L,alt:a?.name||e,className:"w-10 h-10 rounded-sm border border-gray-300/40"}),t.jsx("span",{className:"sr-only",children:a?.name})]},e)})]}),t.jsx("div",{className:"flex flex-wrap gap-3 mb-4",children:I.map(({name:e,slug:a})=>t.jsx("a",{href:a,className:`px-4 py-2 rounded font-semibold transition ${i===e?"bg-accent-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-accent-400"}`,onClick:()=>p(e),children:e},e))}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4 w-full gap-4",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Insights"}),t.jsx("input",{type:"text",placeholder:"Search articles, resources, news...",value:n,onChange:e=>d(e.target.value),className:"border rounded px-3 py-2 w-full max-w-sm"})]}),t.jsx(k,{posts:f})]})}export{T as default};
