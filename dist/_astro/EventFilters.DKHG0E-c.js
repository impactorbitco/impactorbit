import{r as l,u as q,j as t}from"./vendor.CrIUclV0.js";import{S as J}from"./chunk_searchablelibrary.CpyzYAdE.js";function Z(o){return o?String(o).toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+|-+$/g,""):""}const Y=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Côte d’Ivoire","Croatia","Cuba","Cyprus","Czechia","Czech Republic","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],L="/sdgs/default.svg",z=J.reduce((o,r)=>(o[r.id]=r,o),{}),T=o=>{if(!o)return null;let r=new Date(o);if(!isNaN(r))return r;const i=o.split("/");if(i.length===3){const[u,w,c]=i.map(Number);if(r=new Date(c,w-1,u),!isNaN(r))return r}return r=Date.parse(o),isNaN(r)?null:new Date(r)},Q=(o,r)=>o?!r||o.getTime()===r.getTime()?o.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):`${o.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})} - ${r.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"",W=o=>{if(!o)return"";const r={uk:"United Kingdom","u.k.":"United Kingdom","united kingdom":"United Kingdom",us:"United States","u.s.":"United States",usa:"United States",eu:"European Union","e.u.":"European Union"};for(const[i,u]of Object.entries(r))if(new RegExp(`\\b${i}\\b`,"i").test(o))return u;for(const i of Y)if(new RegExp(`\\b${i}\\b`,"i").test(o))return i;return""},X={sustainability:["climate","energy","environment","sustainable development"],"health & wellbeing":["health","wellbeing","mental health","adhd","medical"],"space & tech":["space","technology","innovation","aerospace"],"education & skills":["education","training","skills","learning"],"policy & governance":["policy","government","regulation","legislation"]},ee=o=>{const r=o.toLowerCase();for(const[i,u]of Object.entries(X))if(u.includes(r))return i;return"other"};function ne({preRenderedEvents:o=[],batchSize:r=6,flatList:i=!1}){const u=new Date;u.setHours(0,0,0,0);const w=Array.isArray(o)?o:[],c=l.useMemo(()=>w.map(e=>{const n=T(e.start),a=T(e.end);let s="in-person";e.mode?s=/online|virtual/i.test(e.mode)?"online":"in-person":e.location&&/(online|virtual|zoom|teams|webinar)/i.test(e.location)&&(s="online");const d=(e.organizer||"TBD").split(",").map(v=>v.trim());return{...e,slug:e.slug||Z(e.title),startDate:n,endDate:a,location:e.location&&e.location!=="-"?e.location:"TBD",country:W(e.location),organizers:d,categories:(e.categories||[]).map(v=>v.toLowerCase().trim()),url:e.url||"",image:e.image||e.image_url||"",mode:s,sdgs:Array.isArray(e.sdgs)?e.sdgs:[]}}).filter(e=>e.startDate&&e.startDate>=u).sort((e,n)=>e.startDate-n.startDate),[w]),j=l.useMemo(()=>{const e=c.flatMap(n=>n.categories);return Array.from(new Set(e)).sort()},[c]),U=l.useMemo(()=>{const e={};return j.forEach(n=>{const a=ee(n);e[a]||(e[a]=[]),e[a].push(n)}),e},[j]),I=l.useMemo(()=>{const e=c.flatMap(n=>n.organizers);return Array.from(new Set(e)).sort()},[c]),O=l.useMemo(()=>Array.from(new Set(c.map(e=>e.country).filter(Boolean))).sort(),[c]),R=l.useMemo(()=>{const e=new Set;return c.forEach(n=>n.sdgs.forEach(a=>e.add(a))),["All",...Array.from(e).sort((n,a)=>n-a)]},[c]),[m,M]=l.useState(""),[g,A]=l.useState(""),[p,k]=l.useState(""),[h,D]=l.useState("both"),[x,S]=l.useState("All"),[b,K]=l.useState(""),[y,P]=l.useState(""),C=(e,n,a)=>a(e===n?"":n),f=l.useMemo(()=>c.filter(e=>{const n=!m||e.categories.includes(m),a=!g||e.organizers.some(_=>_.toLowerCase()===g.toLowerCase()),s=!p||e.country.toLowerCase()===p.toLowerCase(),d=h==="both"||e.mode===h,v=x==="All"||e.sdgs.includes(x),$=!b||e.startDate>=new Date(b),H=!y||e.endDate<=new Date(y);return n&&a&&s&&d&&v&&$&&H}),[c,m,g,p,h,x,b,y]),[E,G]=l.useState(r),{ref:F,inView:B}=q({rootMargin:"200px",triggerOnce:!1});l.useEffect(()=>{!i&&B&&G(e=>Math.min(e+r,f.length))},[B,f.length,r,i]),l.useEffect(()=>{i||G(r)},[m,g,p,h,x,b,y,r,i]);const N=i?f:f.slice(0,E),V=l.useMemo(()=>{if(i)return{all:N};const e={};return N.forEach(n=>{const a=n.startDate.toLocaleString("default",{month:"long",year:"numeric"});e[a]||(e[a]=[]),e[a].push(n)}),e},[N,i]);return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-6",children:[t.jsxs("select",{value:m,onChange:e=>M(e.target.value),className:"border rounded px-2 py-1 text-gray-700",children:[t.jsx("option",{value:"",children:"All Categories"}),Object.entries(U).map(([e,n])=>t.jsx("optgroup",{label:e,children:n.map(a=>t.jsx("option",{value:a,children:a},a))},e))]}),t.jsxs("select",{value:g,onChange:e=>A(e.target.value),className:"border rounded px-2 py-1 text-gray-700",children:[t.jsx("option",{value:"",children:"All Organisers"}),I.map(e=>t.jsx("option",{value:e.toLowerCase(),children:e},e))]}),t.jsxs("select",{value:p,onChange:e=>k(e.target.value),className:"border rounded px-2 py-1 text-gray-700",children:[t.jsx("option",{value:"",children:"All Countries"}),O.map(e=>t.jsx("option",{value:e.toLowerCase(),children:e},e))]}),t.jsxs("select",{value:h,onChange:e=>D(e.target.value),className:"border rounded px-2 py-1 text-gray-700",children:[t.jsx("option",{value:"both",children:"Format"}),t.jsx("option",{value:"in-person",children:"In-person"}),t.jsx("option",{value:"online",children:"Online"})]}),t.jsx("input",{type:"date",value:b,onChange:e=>K(e.target.value),className:"border rounded px-2 py-1 text-gray-800 bg-white"}),t.jsx("input",{type:"date",value:y,onChange:e=>P(e.target.value),className:"border rounded px-2 py-1 text-gray-800 bg-white"})]}),t.jsxs("nav",{className:"flex flex-wrap gap-2 mb-4 border-b pb-3 border-accent-500 dark:border-accent-500",children:[t.jsx("button",{onClick:()=>S("All"),className:`px-4 py-2 text-sm font-medium rounded-t-md ${x==="All"?"bg-accent-600 text-white":"text-gray-700 hover:bg-accent-100"}`,children:"All SDGs"}),R.filter(e=>e!=="All").map(e=>{const n=z[e];return t.jsxs("button",{onClick:()=>S(e),className:`flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-t-md ${x===e?"bg-accent-600 text-white":"text-gray-700 hover:bg-accent-100"}`,children:[t.jsx("img",{src:n?.icon||L,alt:n?.name||`SDG ${e}`,className:"w-8 h-8 rounded-sm"}),t.jsx("span",{className:"sr-only",children:n?.name})]},e)})]}),Object.entries(V).map(([e,n])=>t.jsxs("section",{className:"space-y-6",children:[!i&&t.jsx("h2",{className:"text-2xl font-bold text-white",children:e}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:n.map(a=>t.jsxs("div",{className:"border rounded-lg p-4 shadow-sm flex flex-col h-full bg-white",children:[a.image&&t.jsx("img",{src:a.image,alt:a.title,className:"w-full h-48 object-cover rounded mb-4"}),t.jsx("a",{href:`/events/${a.slug}`,className:"text-lg font-semibold mb-1 hover:underline text-primary-500",children:a.title}),t.jsx("p",{className:"text-sm text-accent-500 mb-1",children:Q(a.startDate,a.endDate)}),t.jsx("p",{className:"text-sm mb-2 text-secondary-500",children:a.location}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[a.categories.map(s=>t.jsx("span",{className:"inline-block bg-accent-500 text-white text-xs px-2 py-1 rounded cursor-pointer",onClick:()=>C(m,s,M),children:s},s)),a.organizers.map(s=>t.jsx("span",{className:"inline-block bg-blue-500 text-white text-xs px-2 py-1 rounded cursor-pointer",onClick:()=>C(g,s.toLowerCase(),A),children:s},s)),a.country&&t.jsx("span",{className:"inline-block bg-green-500 text-white text-xs px-2 py-1 rounded cursor-pointer",onClick:()=>C(p,a.country.toLowerCase(),k),children:a.country}),a.mode&&t.jsx("span",{className:"inline-block bg-purple-500 text-white text-xs px-2 py-1 rounded cursor-pointer",onClick:()=>C(h,a.mode,D),children:a.mode==="online"?"Online":"In-person"})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-4",children:a.sdgs.sort((s,d)=>s-d).map(s=>{const d=z[s];return t.jsx("img",{src:d?.icon||L,alt:d?.name||`SDG ${s}`,className:"w-6 h-6 rounded-sm cursor-pointer",onClick:()=>S(s)},s)})}),a.url&&t.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"mt-auto inline-block px-4 py-2 bg-accent-500 text-white rounded hover:bg-accent-600",children:"View Event"})]},a.slug))})]},e)),!i&&E<f.length&&t.jsx("div",{ref:F,style:{height:"80px"},className:"text-center text-gray-500",children:"Loading more events..."})]})}export{ne as default};
